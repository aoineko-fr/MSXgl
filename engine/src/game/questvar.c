// ____________________________
// ██▀▀█▀▀██▀▀▀▀▀▀▀█▀▀█        │   ▄▄                 ▄▄    ▄▄ ▄
// ██  ▀  █▄  ▀██▄ ▀ ▄█ ▄▀▀ █  │  ██ █ ██ █ ▄███  ██▀ ██▀   ██ █ ▄▀██ ██▄▀
// █  █ █  ▀▀  ▄█  █  █ ▀▄█ █▄ │  ▀█▄█ ▀█▄█ ▀█▄▄ ▄██  ▀█▄   ▀█▀  ▀▄██ ██
// ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀────────┘  
//  Quest variables module
//─────────────────────────────────────────────────────────────────────────────

//=============================================================================
// INCLUDES
//=============================================================================
#include "msxgl.h"
#include "game/questvar.h"

//=============================================================================
// DEFINES
//=============================================================================

//=============================================================================
// VARIABLES
//=============================================================================

// Quest variables bit-field
u8 g_QuestVar[QUESTVAR_BYTES];

//=============================================================================
// READ-ONLY DATA
//=============================================================================

// Quest variable bit masks
const u8 g_QuestVarMask[8] = { 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80 };

//=============================================================================
// FUNCTIONS
//=============================================================================

//-----------------------------------------------------------------------------
// Initialize quest variables
void QuestVar_Initialize()
{
	for (u8 i = 0; i < QUESTVAR_BYTES; i++)
		g_QuestVar[i] = 0;
}

//-----------------------------------------------------------------------------
// Set a quest variable
void QuestVar_Set(u8 var)
{
	g_QuestVar[var / 8] |= g_QuestVarMask[var % 8];
}

//-----------------------------------------------------------------------------
// Reset a quest variable
void QuestVar_Reset(u8 var)
{
	g_QuestVar[var / 8] &= ~g_QuestVarMask[var % 8];
}

//-----------------------------------------------------------------------------
// Toggle a quest variable
void QuestVar_Toggle(u8 var)
{
	g_QuestVar[var / 8] ^= g_QuestVarMask[var % 8];
}

//-----------------------------------------------------------------------------
// Get a quest variable
bool QuestVar_Get(u8 var)
{
	return (g_QuestVar[var / 8] & g_QuestVarMask[var % 8]) != 0;
}