; ____________________________                                                 
; ██▀▀█▀▀██▀▀▀▀▀▀▀█▀▀█        │   ▄▄       ▄▄                                  
; ██  ▀  █▄  ▀██▄ ▀ ▄█ ▄▀▀ █  │  ██▄█ ██▄▀ ██▄▀ ▄█▀▄  ██▀                      
; █  █ █  ▀▀  ▄█  █  █ ▀▄█ █▄ │  ██ █ ██   ██ █ ▀█▄▀ ▄██                       
; ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀────────┘                                                
;  by Guillaume 'Aoineko' Blanchard under CC BY-SA license                     
;==============================================================================
; Autogenerated Arkos AKY_6CH_6CH player for MSX-GL library                           
;  on 07/12/2025 at 18:15:40,74                                                         
;                                                                              
; Arkos Tracker and the Z80 players are coded and designed                     
;  by Julien Névo (aka Targhan/Arkos) under MIT License.                       
;==============================================================================
PLY_AKY_6CH_PSGREGISTER_OFFSETREGISTERSOFTWAREPERIODMSB = .+1
PLY_AKY_6CH_PSGREGISTER_OFFSETREGISTERHARDWAREPERIODMSB = .+1
PLY_AKY_6CH_PSGREGISTER_OFFSETREGISTERHARDWAREENVELOPE = .+2
PLY_AKY_6CH_RRB_SOUNDCHANNELBIT = .+2
PLY_AKY_6CH_START:
PLY_AKY_6CH_PSGREGISTER_OFFSETREGISTERSOFTWAREPERIODLSB:
PLY_AKY_6CH_OPCODE_OR_A:
PLY_AKY_6CH_OFFSET1B:
PLY_AKY_6CH_PSGREGISTER_OFFSETREGISTERHARDWAREPERIODLSB:
	jp PLY_AKY_6CH_INIT
PLY_AKY_6CH_PSGREGISTER_OFFSETREGISTERNOISE = .+1
PLY_AKY_6CH_PSG1HARDWAREREGISTERARRAY_SIZE = .+2
PLY_AKY_6CH_RRB_NOISECHANNELBIT = .+2
PLY_AKY_6CH_PSGREGISTER_OFFSETRETRIG:
	jp PLY_AKY_6CH_PLAY
_PLY_AKY_6CH_INIT::
PLY_AKY_6CH_INIT:
PLY_AKY_6CH_PSGREGISTER_OFFSETREGISTERVOLUME:
	inc hl
    ld a,(hl)
    inc hl
PLY_AKY_6CH_PSG1SOFTWAREREGISTERARRAY_SIZE = .+2
    ld de,#0x8
    add hl,de
    ld (PLY_AKY_6CH_PSG1HARDWAREREGISTERARRAY_END),hl
    ld a,#0x0
    ld (PLY_AKY_6CH_CHANNEL1_REGISTERBLOCKLINESTATE_OPCODE),a
    ld (PLY_AKY_6CH_CHANNEL2_REGISTERBLOCKLINESTATE_OPCODE),a
    ld (PLY_AKY_6CH_CHANNEL3_REGISTERBLOCKLINESTATE_OPCODE),a
    ld (PLY_AKY_6CH_CHANNEL4_REGISTERBLOCKLINESTATE_OPCODE),a
    ld (PLY_AKY_6CH_CHANNEL5_REGISTERBLOCKLINESTATE_OPCODE),a
    ld (PLY_AKY_6CH_CHANNEL6_REGISTERBLOCKLINESTATE_OPCODE),a
    ld hl,#0x1
    ld (PLY_AKY_6CH_PATTERNFRAMECOUNTER),hl
    ret 
_PLY_AKY_6CH_PLAY::
PLY_AKY_6CH_PLAY:
	ld (PLY_AKY_6CH_SAVESP),sp
    ld hl,(PLY_AKY_6CH_PATTERNFRAMECOUNTER)
    dec hl
    ld a,l
    or h
    jr z,PLY_AKY_6CH_PATTERNFRAMECOUNTER_OVER
    ld (PLY_AKY_6CH_PATTERNFRAMECOUNTER),hl
    jr PLY_AKY_6CH_CHANNEL1_WAITBEFORENEXTREGISTERBLOCK_START
PLY_AKY_6CH_PATTERNFRAMECOUNTER_OVER:
	ld sp,(PLY_AKY_6CH_PSG1HARDWAREREGISTERARRAY_END)
    pop hl
    ld a,l
    or h
    jr nz,PLY_AKY_6CH_LINKERNOTENDSONG
    pop hl
    ld sp,hl
    pop hl
PLY_AKY_6CH_LINKERNOTENDSONG:
	ld (PLY_AKY_6CH_PATTERNFRAMECOUNTER),hl
    pop hl
    ld (PLY_AKY_6CH_CHANNEL1_PTTRACK),hl
    pop hl
    ld (PLY_AKY_6CH_CHANNEL2_PTTRACK),hl
    pop hl
    ld (PLY_AKY_6CH_CHANNEL3_PTTRACK),hl
    pop hl
    ld (PLY_AKY_6CH_CHANNEL4_PTTRACK),hl
    pop hl
    ld (PLY_AKY_6CH_CHANNEL5_PTTRACK),hl
    pop hl
    ld (PLY_AKY_6CH_CHANNEL6_PTTRACK),hl
    ld (PLY_AKY_6CH_PSG1HARDWAREREGISTERARRAY_END),sp
    ld a,#0x1
    ld (PLY_AKY_6CH_CHANNEL2_WAITBEFORENEXTREGISTERBLOCK),a
    ld (PLY_AKY_6CH_CHANNEL3_WAITBEFORENEXTREGISTERBLOCK),a
    ld (PLY_AKY_6CH_CHANNEL4_WAITBEFORENEXTREGISTERBLOCK),a
    ld (PLY_AKY_6CH_CHANNEL5_WAITBEFORENEXTREGISTERBLOCK),a
    ld (PLY_AKY_6CH_CHANNEL6_WAITBEFORENEXTREGISTERBLOCK),a
    jr PLY_AKY_6CH_CHANNEL1_WAITBEFORENEXTREGISTERBLOCK_OVER
PLY_AKY_6CH_CHANNEL1_WAITBEFORENEXTREGISTERBLOCK_START:
	ld a,(PLY_AKY_6CH_CHANNEL1_WAITBEFORENEXTREGISTERBLOCK)
    dec a
    jr nz,PLY_AKY_6CH_CHANNEL1_REGISTERBLOCK_PROCESS
PLY_AKY_6CH_CHANNEL1_WAITBEFORENEXTREGISTERBLOCK_OVER:
	ld a,#0x0
PLY_AKY_6CH_PLAYCITY_SELECTWRITE_PORT_LSB_RIGHT = .+2
    ld (PLY_AKY_6CH_CHANNEL1_REGISTERBLOCKLINESTATE_OPCODE),a
PLY_AKY_6CH_PLAYCITY_SELECTWRITE_PORT_LSB_LEFT = .+3
    ld sp,(PLY_AKY_6CH_CHANNEL1_PTTRACK)
    dec sp
    pop af
    pop hl
    ld (PLY_AKY_6CH_CHANNEL1_PTTRACK),sp
    ld (PLY_AKY_6CH_CHANNEL1_PTREGISTERBLOCK),hl
PLY_AKY_6CH_CHANNEL1_REGISTERBLOCK_PROCESS:
	ld (PLY_AKY_6CH_CHANNEL1_WAITBEFORENEXTREGISTERBLOCK),a
PLY_AKY_6CH_CHANNEL2_WAITBEFORENEXTREGISTERBLOCK_START:
	ld a,(PLY_AKY_6CH_CHANNEL2_WAITBEFORENEXTREGISTERBLOCK)
    dec a
    jr nz,PLY_AKY_6CH_CHANNEL2_REGISTERBLOCK_PROCESS
PLY_AKY_6CH_CHANNEL2_WAITBEFORENEXTREGISTERBLOCK_OVER:
	ld a,#0x0
    ld (PLY_AKY_6CH_CHANNEL2_REGISTERBLOCKLINESTATE_OPCODE),a
    ld sp,(PLY_AKY_6CH_CHANNEL2_PTTRACK)
    dec sp
    pop af
    pop hl
    ld (PLY_AKY_6CH_CHANNEL2_PTTRACK),sp
    ld (PLY_AKY_6CH_CHANNEL2_PTREGISTERBLOCK),hl
PLY_AKY_6CH_CHANNEL2_REGISTERBLOCK_PROCESS:
	ld (PLY_AKY_6CH_CHANNEL2_WAITBEFORENEXTREGISTERBLOCK),a
PLY_AKY_6CH_CHANNEL3_WAITBEFORENEXTREGISTERBLOCK_START:
	ld a,(PLY_AKY_6CH_CHANNEL3_WAITBEFORENEXTREGISTERBLOCK)
    dec a
    jr nz,PLY_AKY_6CH_CHANNEL3_REGISTERBLOCK_PROCESS
PLY_AKY_6CH_CHANNEL3_WAITBEFORENEXTREGISTERBLOCK_OVER:
	ld a,#0x0
    ld (PLY_AKY_6CH_CHANNEL3_REGISTERBLOCKLINESTATE_OPCODE),a
    ld sp,(PLY_AKY_6CH_CHANNEL3_PTTRACK)
    dec sp
    pop af
    pop hl
    ld (PLY_AKY_6CH_CHANNEL3_PTTRACK),sp
    ld (PLY_AKY_6CH_CHANNEL3_PTREGISTERBLOCK),hl
PLY_AKY_6CH_CHANNEL3_REGISTERBLOCK_PROCESS:
	ld (PLY_AKY_6CH_CHANNEL3_WAITBEFORENEXTREGISTERBLOCK),a
PLY_AKY_6CH_CHANNEL4_WAITBEFORENEXTREGISTERBLOCK_START:
	ld a,(PLY_AKY_6CH_CHANNEL4_WAITBEFORENEXTREGISTERBLOCK)
    dec a
    jr nz,PLY_AKY_6CH_CHANNEL4_REGISTERBLOCK_PROCESS
PLY_AKY_6CH_CHANNEL4_WAITBEFORENEXTREGISTERBLOCK_OVER:
	ld a,#0x0
    ld (PLY_AKY_6CH_CHANNEL4_REGISTERBLOCKLINESTATE_OPCODE),a
    ld sp,(PLY_AKY_6CH_CHANNEL4_PTTRACK)
    dec sp
    pop af
    pop hl
    ld (PLY_AKY_6CH_CHANNEL4_PTTRACK),sp
    ld (PLY_AKY_6CH_CHANNEL4_PTREGISTERBLOCK),hl
PLY_AKY_6CH_CHANNEL4_REGISTERBLOCK_PROCESS:
	ld (PLY_AKY_6CH_CHANNEL4_WAITBEFORENEXTREGISTERBLOCK),a
PLY_AKY_6CH_CHANNEL5_WAITBEFORENEXTREGISTERBLOCK_START:
	ld a,(PLY_AKY_6CH_CHANNEL5_WAITBEFORENEXTREGISTERBLOCK)
    dec a
    jr nz,PLY_AKY_6CH_CHANNEL5_REGISTERBLOCK_PROCESS
PLY_AKY_6CH_CHANNEL5_WAITBEFORENEXTREGISTERBLOCK_OVER:
	ld a,#0x0
    ld (PLY_AKY_6CH_CHANNEL5_REGISTERBLOCKLINESTATE_OPCODE),a
PLY_AKY_6CH_PLAYCITY_WRITE_PORT_MSB = .+3
    ld sp,(PLY_AKY_6CH_CHANNEL5_PTTRACK)
PLY_AKY_6CH_PLAYCITY_SELECT_PORT_MSB:
	dec sp
    pop af
    pop hl
PLY_AKY_6CH_SPECNEXT_PSG3_REGISTER = .+1
PLY_AKY_6CH_TURBOSOUND_PSG2_REGISTER = .+2
PLY_AKY_6CH_PCW_TURBOSOUND_PSGNUMBER2_SELECTION_VALUE = .+2
PLY_AKY_6CH_SPECNEXT_PSG2_REGISTER = .+2
PLY_AKY_6CH_OPCODE_SCF = .+3
PLY_AKY_6CH_TURBOSOUND_PSG1_REGISTER = .+3
PLY_AKY_6CH_SPECNEXT_PSG1_REGISTER = .+3
PLY_AKY_6CH_PCW_TURBOSOUND_PSGNUMBER1_SELECTION_VALUE = .+3
    ld (PLY_AKY_6CH_CHANNEL5_PTTRACK),sp
    ld (PLY_AKY_6CH_CHANNEL5_PTREGISTERBLOCK),hl
PLY_AKY_6CH_CHANNEL5_REGISTERBLOCK_PROCESS:
	ld (PLY_AKY_6CH_CHANNEL5_WAITBEFORENEXTREGISTERBLOCK),a
PLY_AKY_6CH_CHANNEL6_WAITBEFORENEXTREGISTERBLOCK_START:
	ld a,(PLY_AKY_6CH_CHANNEL6_WAITBEFORENEXTREGISTERBLOCK)
    dec a
    jr nz,PLY_AKY_6CH_CHANNEL6_REGISTERBLOCK_PROCESS
PLY_AKY_6CH_CHANNEL6_WAITBEFORENEXTREGISTERBLOCK_OVER:
	ld a,#0x0
    ld (PLY_AKY_6CH_CHANNEL6_REGISTERBLOCKLINESTATE_OPCODE),a
    ld sp,(PLY_AKY_6CH_CHANNEL6_PTTRACK)
    dec sp
    pop af
    pop hl
    ld (PLY_AKY_6CH_CHANNEL6_PTTRACK),sp
    ld (PLY_AKY_6CH_CHANNEL6_PTREGISTERBLOCK),hl
PLY_AKY_6CH_CHANNEL6_REGISTERBLOCK_PROCESS:
	ld (PLY_AKY_6CH_CHANNEL6_WAITBEFORENEXTREGISTERBLOCK),a
    ld sp,#PLY_AKY_6CH_RETTABLE_READREGISTERBLOCK
    ld iy,#PLY_AKY_6CH_PSG1HARDWAREREGISTERARRAY
    ld b,#0xe0
    ld ix,#PLY_AKY_6CH_PSG1REGISTER0
    ld hl,(PLY_AKY_6CH_CHANNEL1_PTREGISTERBLOCK)
    ld a,(PLY_AKY_6CH_CHANNEL1_REGISTERBLOCKLINESTATE_OPCODE)
    add a,a
    jp PLY_AKY_6CH_READREGISTERBLOCK
PLY_AKY_6CH_CHANNEL1_REGISTERBLOCK_RETURN:
	ld a,#0xff
    ld (PLY_AKY_6CH_CHANNEL1_REGISTERBLOCKLINESTATE_OPCODE),a
    ld (PLY_AKY_6CH_CHANNEL1_PTREGISTERBLOCK),hl
    srl b
    ld ix,#PLY_AKY_6CH_PSG1REGISTER2
    ld hl,(PLY_AKY_6CH_CHANNEL2_PTREGISTERBLOCK)
    ld a,(PLY_AKY_6CH_CHANNEL2_REGISTERBLOCKLINESTATE_OPCODE)
    add a,a
    jp PLY_AKY_6CH_READREGISTERBLOCK
PLY_AKY_6CH_CHANNEL2_REGISTERBLOCK_RETURN:
	ld a,#0xff
    ld (PLY_AKY_6CH_CHANNEL2_REGISTERBLOCKLINESTATE_OPCODE),a
    ld (PLY_AKY_6CH_CHANNEL2_PTREGISTERBLOCK),hl
    scf
    rr b
    ld ix,#PLY_AKY_6CH_PSG1REGISTER4
    ld hl,(PLY_AKY_6CH_CHANNEL3_PTREGISTERBLOCK)
    ld a,(PLY_AKY_6CH_CHANNEL3_REGISTERBLOCKLINESTATE_OPCODE)
    add a,a
    jp PLY_AKY_6CH_READREGISTERBLOCK
PLY_AKY_6CH_CHANNEL3_REGISTERBLOCK_RETURN:
	ld a,#0xff
    ld (PLY_AKY_6CH_CHANNEL3_REGISTERBLOCKLINESTATE_OPCODE),a
    ld (PLY_AKY_6CH_CHANNEL3_PTREGISTERBLOCK),hl
    ld hl,#PLY_AKY_6CH_PSG1REGISTER0
    ret 
PLY_AKY_6CH_PSG1AFTERSENDINGPSGREGISTERS:
	ld iy,#PLY_AKY_6CH_PSG2HARDWAREREGISTERARRAY
    ld b,#0xe0
    ld ix,#PLY_AKY_6CH_CHANNEL4_REGISTERBASE
    ld hl,(PLY_AKY_6CH_CHANNEL4_PTREGISTERBLOCK)
    ld a,(PLY_AKY_6CH_CHANNEL4_REGISTERBLOCKLINESTATE_OPCODE)
    add a,a
    jp PLY_AKY_6CH_READREGISTERBLOCK
PLY_AKY_6CH_CHANNEL4_REGISTERBLOCK_RETURN:
	ld a,#0xff
    ld (PLY_AKY_6CH_CHANNEL4_REGISTERBLOCKLINESTATE_OPCODE),a
    ld (PLY_AKY_6CH_CHANNEL4_PTREGISTERBLOCK),hl
    srl b
    ld ix,#PLY_AKY_6CH_CHANNEL5_REGISTERBASE
    ld hl,(PLY_AKY_6CH_CHANNEL5_PTREGISTERBLOCK)
    ld a,(PLY_AKY_6CH_CHANNEL5_REGISTERBLOCKLINESTATE_OPCODE)
    add a,a
    jp PLY_AKY_6CH_READREGISTERBLOCK
PLY_AKY_6CH_CHANNEL5_REGISTERBLOCK_RETURN:
	ld a,#0xff
    ld (PLY_AKY_6CH_CHANNEL5_REGISTERBLOCKLINESTATE_OPCODE),a
    ld (PLY_AKY_6CH_CHANNEL5_PTREGISTERBLOCK),hl
    scf
    rr b
    ld ix,#PLY_AKY_6CH_CHANNEL6_REGISTERBASE
    ld hl,(PLY_AKY_6CH_CHANNEL6_PTREGISTERBLOCK)
    ld a,(PLY_AKY_6CH_CHANNEL6_REGISTERBLOCKLINESTATE_OPCODE)
    add a,a
    jp PLY_AKY_6CH_READREGISTERBLOCK
PLY_AKY_6CH_CHANNEL6_REGISTERBLOCK_RETURN:
	ld a,#0xff
    ld (PLY_AKY_6CH_CHANNEL6_REGISTERBLOCKLINESTATE_OPCODE),a
    ld (PLY_AKY_6CH_CHANNEL6_PTREGISTERBLOCK),hl
    ld hl,#PLY_AKY_6CH_CHANNEL4_REGISTERBASE
    ret 
PLY_AKY_6CH_PSG2AFTERSENDINGPSGREGISTERS:
	ld sp,(PLY_AKY_6CH_SAVESP)
    ret 
PLY_AKY_6CH_READREGISTERBLOCK:
	ld a,(hl)
    inc hl
    jp c,PLY_AKY_6CH_RRB_NONINITIALSTATE
    rra 
    jr c,PLY_AKY_6CH_RRB_IS_SOFTWAREONLYORSOFTWAREANDHARDWARE
    rra 
    jr c,PLY_AKY_6CH_RRB_IS_HARDWAREONLY
PLY_AKY_6CH_RRB_IS_NOSOFTWARENOHARDWARE:
	rra 
    jr nc,PLY_AKY_6CH_RRB_NIS_NOSOFTWARENOHARDWARE_READVOLUME
    ld c,(hl)
    inc hl
    ld +4(iy),c
    res 5,b
PLY_AKY_6CH_RRB_NIS_NOSOFTWARENOHARDWARE_READVOLUME:
	ld +6(ix),a
    set 2,b
    ret 
PLY_AKY_6CH_RRB_IS_HARDWAREONLY:
	rra 
    jr nc,PLY_AKY_6CH_RRB_IS_HO_NORETRIG
    ld +3(iy),#0xff
PLY_AKY_6CH_RRB_IS_HO_NORETRIG:
	rra 
    jr nc,PLY_AKY_6CH_RRB_IS_HO_NONOISE
    ld c,(hl)
    inc hl
    ld +4(iy),c
    res 5,b
PLY_AKY_6CH_RRB_IS_HO_NONOISE:
	and #0xf
    ld +2(iy),a
    ld a,(hl)
    inc hl
    ld +0(iy),a
    ld a,(hl)
    inc hl
    ld +1(iy),a
    set 2,b
    ld +6(ix),#0x10
    ret 
PLY_AKY_6CH_RRB_IS_SOFTWAREONLYORSOFTWAREANDHARDWARE:
	rra 
    jr c,PLY_AKY_6CH_RRB_IS_SOFTWAREANDHARDWARE
    rra 
    jr nc,PLY_AKY_6CH_RRB_IS_SOFTWAREONLY_NONOISE
    ld c,(hl)
    inc hl
    ld +4(iy),c
    res 5,b
PLY_AKY_6CH_RRB_IS_SOFTWAREONLY_NONOISE:
	ld +6(ix),a
    ld a,(hl)
    inc hl
    ld +0(ix),a
    ld a,(hl)
    inc hl
    ld +1(ix),a
    ret 
PLY_AKY_6CH_RRB_IS_SOFTWAREANDHARDWARE:
	rra 
    jr nc,PLY_AKY_6CH_RRB_IS_SAH_NORETRIG
    ld +3(iy),#0xff
PLY_AKY_6CH_RRB_IS_SAH_NORETRIG:
	rra 
    jr nc,PLY_AKY_6CH_RRB_IS_SAH_NONOISE
    ld c,(hl)
    inc hl
    ld +4(iy),c
    res 5,b
PLY_AKY_6CH_RRB_IS_SAH_NONOISE:
	and #0xf
    ld +2(iy),a
    ld a,(hl)
    inc hl
    ld +0(ix),a
    ld a,(hl)
    inc hl
    ld +1(ix),a
    ld +6(ix),#0x10
    ld a,(hl)
    inc hl
    ld +0(iy),a
    ld a,(hl)
    inc hl
    ld +1(iy),a
    ret 
PLY_AKY_6CH_RRB_NIS_NOSOFTWARENOHARDWARE_LOOP:
	ld a,(hl)
    inc hl
    ld h,(hl)
    ld l,a
    ld a,(hl)
    inc hl
PLY_AKY_6CH_RRB_NONINITIALSTATE:
	rra 
    jr c,PLY_AKY_6CH_RRB_NIS_SOFTWAREONLYORSOFTWAREANDHARDWARE
    rra 
    jp c,PLY_AKY_6CH_RRB_NIS_HARDWAREONLY
    ld e,a
    and #0x3
    cp #0x2
    jr z,PLY_AKY_6CH_RRB_NIS_NOSOFTWARENOHARDWARE_LOOP
    set 2,b
    ld a,e
    rra 
    jr nc,PLY_AKY_6CH_RRB_NIS_NOVOLUME
    and #0xf
    ld +6(ix),a
PLY_AKY_6CH_RRB_NIS_NOVOLUME:
	bit 5,e
    ret z
    ld c,(hl)
    inc hl
    ld +4(iy),c
    res 5,b
    ret 
PLY_AKY_6CH_RRB_NIS_SOFTWAREONLYORSOFTWAREANDHARDWARE:
	rra 
    jp c,PLY_AKY_6CH_RRB_NIS_SOFTWAREANDHARDWARE
    ld e,a
    and #0xf
    ld +6(ix),a
    bit 4,e
    jr z,PLY_AKY_6CH_RRB_NIS_SOFTWAREONLY_NOLSP
    ld a,(hl)
    inc hl
    ld +0(ix),a
PLY_AKY_6CH_RRB_NIS_SOFTWAREONLY_NOLSP:
	bit 5,e
    ret z
    ld a,(hl)
    inc hl
    ld +1(ix),a
    rla 
    ret nc
    res 5,b
    rla 
    ret nc
    ld c,(hl)
    inc hl
    ld +4(iy),c
    ret 
PLY_AKY_6CH_RRB_NIS_HARDWAREONLY:
	ld e,a
    and #0x7
    or #0x8
    ld +2(iy),a
    set 2,b
    ld +6(ix),#0x10
    ld a,e
    rla 
    rla 
    rla 
    jr nc,PLY_AKY_6CH_RRB_NIS_HARDWAREONLY_NOLSB
    ld c,(hl)
    inc hl
    ld +0(iy),c
PLY_AKY_6CH_RRB_NIS_HARDWAREONLY_NOLSB:
	rla 
    jr nc,PLY_AKY_6CH_RRB_NIS_HARDWAREONLY_NOMSB
    ld c,(hl)
    inc hl
    ld +1(iy),c
PLY_AKY_6CH_RRB_NIS_HARDWAREONLY_NOMSB:
	rla 
    jr c,PLY_AKY_6CH_RRB_NIS_HARDWARE_SHARED_NOISEORRETRIG_ANDSTOP
    ret 
PLY_AKY_6CH_RRB_NIS_SOFTWAREANDHARDWARE:
	ld +6(ix),#0x10
    rra 
    jr nc,PLY_AKY_6CH_RRB_NIS_SAHH_AFTERLSBH
    ld c,(hl)
    inc hl
    ld +0(iy),c
PLY_AKY_6CH_RRB_NIS_SAHH_AFTERLSBH:
	rra 
    jr nc,PLY_AKY_6CH_RRB_NIS_SAHH_AFTERMSBH
    ld c,(hl)
    inc hl
    ld +1(iy),c
PLY_AKY_6CH_RRB_NIS_SAHH_AFTERMSBH:
	rra 
    jr nc,PLY_AKY_6CH_RRB_NIS_SAHH_AFTERLSBS
    ld c,(hl)
    inc hl
    .db 0xdd
    .db 0x71
    .db 0x0
PLY_AKY_6CH_RRB_NIS_SAHH_AFTERLSBS:
	rra 
    jr nc,PLY_AKY_6CH_RRB_NIS_SAHH_AFTERMSBS
    ld c,(hl)
    inc hl
    .db 0xdd
    .db 0x71
    .db 0x1
PLY_AKY_6CH_RRB_NIS_SAHH_AFTERMSBS:
	rra 
    jr nc,PLY_AKY_6CH_RRB_NIS_SAHH_AFTERENVELOPE
    ld c,(hl)
    inc hl
    ld +2(iy),c
PLY_AKY_6CH_RRB_NIS_SAHH_AFTERENVELOPE:
	rra 
    ret nc
PLY_AKY_6CH_RRB_NIS_HARDWARE_SHARED_NOISEORRETRIG_ANDSTOP:
	ld a,(hl)
    inc hl
    rra 
    jr nc,PLY_AKY_6CH_RRB_NIS_S_NOR_NORETRIG
    ld +3(iy),#0xff
PLY_AKY_6CH_RRB_NIS_S_NOR_NORETRIG:
	rra 
    ret nc
    res 5,b
    rra 
    ret nc
    ld +4(iy),a
    ret 
PLY_AKY_6CH_SENDPSGREGISTERS_FASTPSGACCESS_A0_A1:
	ld a,#0x7
    out (0xa0),a
    ld a,b
    out (0xa1),a
    xor a
    out (0xa0),a
    ld a,(hl)
    inc hl
    out (0xa1),a
    ld a,#0x1
    out (0xa0),a
    ld a,(hl)
    inc hl
    out (0xa1),a
    ld a,#0x2
    out (0xa0),a
    ld a,(hl)
    inc hl
    out (0xa1),a
    ld a,#0x3
    out (0xa0),a
    ld a,(hl)
    inc hl
    out (0xa1),a
    ld a,#0x4
    out (0xa0),a
    ld a,(hl)
    inc hl
    out (0xa1),a
    ld a,#0x5
    out (0xa0),a
    ld a,(hl)
    inc hl
    out (0xa1),a
    ld a,#0x8
    out (0xa0),a
    ld a,(hl)
    out (0xa1),a
    inc hl
    inc hl
    ld a,#0x9
    out (0xa0),a
    ld a,(hl)
    out (0xa1),a
PLY_AKY_6CH_REGISTER9END:
	inc hl
    inc hl
    ld a,#0xa
    out (0xa0),a
    ld a,(hl)
    out (0xa1),a
PLY_AKY_6CH_REGISTER10END:
	inc hl
    ld a,#0xb
    out (0xa0),a
    ld a,(hl)
    inc hl
    out (0xa1),a
    ld a,#0xc
    out (0xa0),a
    ld a,(hl)
    inc hl
    out (0xa1),a
    ld a,#0xd
    out (0xa0),a
    ld a,(hl)
    inc hl
    cp (hl)
    jr z,PLY_AKY_6CH_SENDPSGREGISTERS_FASTPSGACCESS_A0_A1_REGISTER13_END
    ld (hl),a
    out (0xa1),a
PLY_AKY_6CH_SENDPSGREGISTERS_FASTPSGACCESS_A0_A1_REGISTER13_END:
	inc hl
    ld a,#0x6
    out (0xa0),a
    ld a,(hl)
    out (0xa1),a
    ret 
PLY_AKY_6CH_SENDPSGREGISTERS_FASTPSGACCESS_10_11:
	ld a,#0x7
    out (0x10),a
    ld a,b
    out (0x11),a
    xor a
    out (0x10),a
    ld a,(hl)
    inc hl
    out (0x11),a
    ld a,#0x1
    out (0x10),a
    ld a,(hl)
    inc hl
    out (0x11),a
    ld a,#0x2
    out (0x10),a
    ld a,(hl)
    inc hl
    out (0x11),a
    ld a,#0x3
    out (0x10),a
    ld a,(hl)
    inc hl
    out (0x11),a
    ld a,#0x4
    out (0x10),a
    ld a,(hl)
    inc hl
    out (0x11),a
    ld a,#0x5
    out (0x10),a
    ld a,(hl)
    inc hl
    out (0x11),a
    ld a,#0x8
    out (0x10),a
    ld a,(hl)
    out (0x11),a
    inc hl
    inc hl
    ld a,#0x9
    out (0x10),a
    ld a,(hl)
    out (0x11),a
    inc hl
    inc hl
    ld a,#0xa
    out (0x10),a
    ld a,(hl)
    out (0x11),a
    inc hl
    ld a,#0xb
    out (0x10),a
    ld a,(hl)
    inc hl
    out (0x11),a
    ld a,#0xc
    out (0x10),a
    ld a,(hl)
    inc hl
    out (0x11),a
    ld a,#0xd
    out (0x10),a
    ld a,(hl)
    inc hl
    cp (hl)
    jr z,PLY_AKY_6CH_SENDPSGREGISTERS_FASTPSGACCESS_10_11_REGISTER13_END
    ld (hl),a
    out (0x11),a
PLY_AKY_6CH_SENDPSGREGISTERS_FASTPSGACCESS_10_11_REGISTER13_END:
	inc hl
    ld a,#0x6
    out (0x10),a
    ld a,(hl)
    out (0x11),a
    ret 
PLY_AKY_6CH_RETTABLE_READREGISTERBLOCK:
	.dw PLY_AKY_6CH_CHANNEL1_REGISTERBLOCK_RETURN
    .dw PLY_AKY_6CH_CHANNEL2_REGISTERBLOCK_RETURN
    .dw PLY_AKY_6CH_CHANNEL3_REGISTERBLOCK_RETURN
    .dw PLY_AKY_6CH_SENDPSGREGISTERS_FASTPSGACCESS_A0_A1
    .dw PLY_AKY_6CH_PSG1AFTERSENDINGPSGREGISTERS
    .dw PLY_AKY_6CH_CHANNEL4_REGISTERBLOCK_RETURN
    .dw PLY_AKY_6CH_CHANNEL5_REGISTERBLOCK_RETURN
    .dw PLY_AKY_6CH_CHANNEL6_REGISTERBLOCK_RETURN
    .dw PLY_AKY_6CH_SENDPSGREGISTERS_FASTPSGACCESS_10_11
    .dw PLY_AKY_6CH_PSG2AFTERSENDINGPSGREGISTERS
PLY_AKY_6CH_CHANNEL1_PTREGISTERBLOCK = 0xf024
PLY_AKY_6CH_CHANNEL1_PTTRACK = 0xf018
PLY_AKY_6CH_CHANNEL1_REGISTERBLOCKLINESTATE_OPCODE = 0xf036
PLY_AKY_6CH_CHANNEL1_WAITBEFORENEXTREGISTERBLOCK = 0xf030
PLY_AKY_6CH_CHANNEL2_PTREGISTERBLOCK = 0xf026
PLY_AKY_6CH_CHANNEL2_PTTRACK = 0xf01a
PLY_AKY_6CH_CHANNEL2_REGISTERBLOCKLINESTATE_OPCODE = 0xf037
PLY_AKY_6CH_CHANNEL2_WAITBEFORENEXTREGISTERBLOCK = 0xf031
PLY_AKY_6CH_CHANNEL3_PTREGISTERBLOCK = 0xf028
PLY_AKY_6CH_CHANNEL3_PTTRACK = 0xf01c
PLY_AKY_6CH_CHANNEL3_REGISTERBLOCKLINESTATE_OPCODE = 0xf038
PLY_AKY_6CH_CHANNEL3_WAITBEFORENEXTREGISTERBLOCK = 0xf032
PLY_AKY_6CH_CHANNEL4_PTREGISTERBLOCK = 0xf02a
PLY_AKY_6CH_CHANNEL4_PTTRACK = 0xf01e
PLY_AKY_6CH_CHANNEL4_REGISTERBASE = 0xf03c
PLY_AKY_6CH_CHANNEL4_REGISTERBLOCKLINESTATE_OPCODE = 0xf039
PLY_AKY_6CH_CHANNEL4_WAITBEFORENEXTREGISTERBLOCK = 0xf033
PLY_AKY_6CH_CHANNEL5_PTREGISTERBLOCK = 0xf02c
PLY_AKY_6CH_CHANNEL5_PTTRACK = 0xf020
PLY_AKY_6CH_CHANNEL5_REGISTERBASE = 0xf03e
PLY_AKY_6CH_CHANNEL5_REGISTERBLOCKLINESTATE_OPCODE = 0xf03a
PLY_AKY_6CH_CHANNEL5_WAITBEFORENEXTREGISTERBLOCK = 0xf034
PLY_AKY_6CH_CHANNEL6_PTREGISTERBLOCK = 0xf02e
PLY_AKY_6CH_CHANNEL6_PTTRACK = 0xf022
PLY_AKY_6CH_CHANNEL6_REGISTERBASE = 0xf040
PLY_AKY_6CH_CHANNEL6_REGISTERBLOCKLINESTATE_OPCODE = 0xf03b
PLY_AKY_6CH_CHANNEL6_WAITBEFORENEXTREGISTERBLOCK = 0xf035
PLY_AKY_6CH_PATTERNFRAMECOUNTER = 0xf016
PLY_AKY_6CH_PSG1HARDWAREREGISTERARRAY = 0xf00b
PLY_AKY_6CH_PSG1HARDWAREREGISTERARRAY_END = 0xf010
PLY_AKY_6CH_PSG1REGISTER0 = 0xf000
PLY_AKY_6CH_PSG1REGISTER2 = 0xf002
PLY_AKY_6CH_PSG1REGISTER4 = 0xf004
PLY_AKY_6CH_PSG2HARDWAREREGISTERARRAY = 0xf047
PLY_AKY_6CH_SAVESP = 0xf012
